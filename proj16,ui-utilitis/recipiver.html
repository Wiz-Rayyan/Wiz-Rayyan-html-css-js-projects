<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Recipe App</title>
    <style>
      * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  padding: 15px;
}

h1 {
  margin-bottom: 40px;
}

.recipe-list {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 15px;
}

.recipe-list .recipe-item {
  display: flex;
  flex-direction: column;
  gap: 15px;
  padding: 20px;
  color: #fff;
  border: 2px solid rgb(253, 52, 243);
  background: linear-gradient(150deg, #39ef74, #4600f1 100%);
}

.recipe-list .recipe-item .recipe-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.recipe-list .recipe-item .recipe-name {
  font-size: 30px;
  font-weight: bolder;
}

.recipe-list .recipe-item .recipe-cuisine {
  font-size: 18px;
  color: #ffdeb8;
}

.recipe-list .recipe-item .recipe-ingredients {
  font-size: 16px;
  font-weight: bold;
}

.recipe-list .recipe-item .recipe-meal-type,
.recipe-list .recipe-item .recipe-rating {
  font-size: 22px;
  color: #c1fdd4;
}

.recipe-list .recipe-item .recipe-details-button {
  padding: 12px 20px;
  border: none;
  font-size: 25px;
  background-color: rgb(242, 242, 117);
  font-weight: bold;
  letter-spacing: 2px;
  cursor: pointer;
}

.loader {
    display: none;
}

.recipe-list.hide {
    display: none;
}

.loader.show {
    display: block;
  border: 3px solid rgba(255, 255, 255, 0.4);
  border-radius: 50%;
  width: 50px;
  height: 50px;
  position: absolute;
  border-top: 3px solid red;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  animation: animateLoader 1s linear infinite;
}

@keyframes animateLoader {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}
    </style>
  </head>
  <body>
    <h1>Recipe App</h1>
    <div class="loader"></div>
    <div class="recipe-list"></div>
    <div class="recipe-details"></div>
    <script  >
      const recipeListContainer = document.querySelector(".recipe-list");
const loader = document.querySelector(".loader");
const recipeDetails = document.querySelector(".recipe-details");

function showLoader(){
    loader.classList.add('show');
    recipeListContainer.classList.add('hide');
}

function removeLoader(){
    loader.classList.remove('show');
    recipeListContainer.classList.remove('hide');
}

async function fetchListOfRecipes() {
    showLoader()
  const response = await fetch("https://dummyjson.com/recipes", {
    method: "GET",
  });

  const result = await response.json();
  if (result && result.recipes && result.recipes.length > 0) {
    removeLoader()
    displayRecipeList(result.recipes);

  }
  console.log(result);
}

function displayRecipeList(getRecipeList) {
  getRecipeList.forEach((recipeItem) => {
    const { name, id, image, cuisine, ingredients, mealType, rating } =
      recipeItem;
    const recipeItemWrapper = document.createElement("div");
    recipeItemWrapper.classList.add("recipe-item");

    // name
    const recipeName = document.createElement("p");
    recipeName.textContent = name;
    recipeName.classList.add("recipe-name");

    // image
    const recipeImg = document.createElement("img");
    recipeImg.src = image;
    recipeImg.classList.add("recipe-image");

    //cuisine
    const recipeCuisine = document.createElement("p");
    recipeCuisine.textContent = cuisine;
    recipeCuisine.classList.add("recipe-cuisine");

    //ingredients
    const recipeIngredients = document.createElement("div");
    recipeIngredients.textContent = ingredients.map((item) => item).join(",");
    recipeIngredients.classList.add("recipe-ingredients");

    // mealType
    const recipeMealType = document.createElement("p");
    recipeMealType.textContent = mealType;
    recipeMealType.classList.add("recipe-meal-type");

    //rating
    const recipeRating = document.createElement("p");
    recipeRating.textContent = rating;
    recipeRating.classList.add("recipe-rating");

    // recipe details button
    const recipeDetailsButton = document.createElement("button");
    recipeDetailsButton.classList.add("recipe-details-button");
    recipeDetailsButton.innerText = "Recipe Details";
    recipeDetailsButton.addEventListener("click", () =>
      handleRecipeDetails(id)
    );

    recipeItemWrapper.appendChild(recipeImg);
    recipeItemWrapper.appendChild(recipeName);
    recipeItemWrapper.appendChild(recipeCuisine);
    recipeItemWrapper.appendChild(recipeIngredients);
    recipeItemWrapper.appendChild(recipeMealType);
    recipeItemWrapper.appendChild(recipeRating);
    recipeItemWrapper.appendChild(recipeDetailsButton);

    recipeListContainer.appendChild(recipeItemWrapper);
  });
}

fetchListOfRecipes();

async function handleRecipeDetails(getId) {
  const response = await fetch(`https://dummyjson.com/recipes/${getId}`);
  const result = await response.json();

  if (result) {
    window.scrollTo({
      top: document.body.scrollHeight,
      behavior: "smooth",
    });

    displayRecipeDetailsData(result);
  }
}

function displayRecipeDetailsData(getRecipeData) {
  recipeDetails.innerHTML = `
        <h1>You are now seeing the details of the following recipe</h1>
        <p>${getRecipeData.name}</p>
        `;
}
    </script>
  </body>
</html>