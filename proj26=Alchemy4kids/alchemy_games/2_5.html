<!--
there r no infinite emojis here just issues. like things got overlappe. shall fix all soon. -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinite Emoji Alchemy</title>
    <style>
        :root {
            --bg-dark: #121212;
            --neon-blue: #0af;
            --neon-pink: #f0a;
            --gold: #fc0;
            --dark-purple: #2a0a4a;
        }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg-dark);
            color: white;
            margin: 0;
            padding: 20px;
            overflow-x: hidden;
        }
        .game-container {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .panel {
            background: rgba(30, 30, 50, 0.7);
            border-radius: 16px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }
        .workspace {
            min-height: 400px;
            position: relative;
            overflow: hidden;
        }
        .element {
            background: rgba(255,255,255,0.08);
            border-radius: 12px;
            padding: 15px;
            margin: 10px;
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            cursor: grab;
            user-select: none;
            transition: all 0.2s;
            position: absolute;
            width: 80px;
        }
        .element:hover {
            background: rgba(255,255,255,0.15);
            transform: scale(1.05);
            box-shadow: 0 0 15px var(--neon-blue);
        }
        .element:active {
            cursor: grabbing;
        }
        .element-emoji {
            font-size: 42px;
            font-family: "Segoe UI Emoji", "Apple Color Emoji", sans-serif;
            margin-bottom: 5px;
        }
        .element-name {
            font-size: 12px;
            color: var(--neon-blue);
            text-align: center;
            word-break: break-word;
            width: 100%;
        }
        .energy-bar {
            height: 20px;
            background: rgba(0,0,0,0.5);
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
        }
        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--neon-pink), var(--neon-blue));
            width: 100%;
            transition: width 0.5s;
        }
        .encyclopedia {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
        }
        .recipe {
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            border-left: 3px solid var(--gold);
        }
        .recipe-formula {
            font-family: monospace;
            color: var(--neon-blue);
            margin-bottom: 5px;
        }
        .recipe-result {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 5px;
        }
        h1, h2, h3 {
            color: var(--gold);
            margin-top: 0;
        }
        .tabs {
            display: flex;
            margin-bottom: 15px;
        }
        .tab {
            padding: 8px 15px;
            background: rgba(0,0,0,0.3);
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            margin-right: 5px;
        }
        .tab.active {
            background: var(--dark-purple);
            color: var(--gold);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .pulse {
            animation: pulse 1s infinite;
        }
    </style>
</head>
<body>
    <h1>âœ¨ Infinite Emoji Alchemy âœ¨</h1>
    
    <div class="game-container">
        <div class="panel">
            <div class="energy-container">
                <h3>Alchemy Energy</h3>
                <div class="energy-bar">
                    <div class="energy-fill" id="energy-fill"></div>
                </div>
                <div id="energy-text">100/100</div>
            </div>
            
            <div class="tabs">
                <div class="tab active" data-tab="elements">Elements</div>
                <div class="tab" data-tab="encyclopedia">Encyclopedia</div>
            </div>
            
            <div class="tab-content active" id="elements-tab">
                <h3>Basic Elements</h3>
                <div id="basic-elements"></div>
                
                <h3>Discovered</h3>
                <div id="discovered-elements"></div>
            </div>
            
            <div class="tab-content" id="encyclopedia-tab">
                <h3>Alchemy Formulas</h3>
                <div class="encyclopedia" id="encyclopedia"></div>
            </div>
        </div>
        
        <div class="panel workspace" id="workspace">
            <h2>Alchemy Workspace</h2>
            <p>Drag elements here to combine them</p>
            <div id="equation-display" style="margin: 20px 0; font-family: monospace;"></div>
        </div>
    </div>

    <script>
        // ===== ğŸ® GAME ENGINE ===== //
        class EmojiAlchemy {
            constructor() {
                this.energy = 100;
                this.maxEnergy = 100;
                this.discovered = new Set(['ğŸ”¥', 'ğŸ’§', 'ğŸŒ', 'ğŸ’¨', 'âš¡']);
                this.recipes = new Map();
                this.elements = new Map();
                this.workspaceElements = new Set();
                this.currentId = 0;
                
                // Prime number assignment for emojis
                this.primeAssignments = new Map([
                    ['ğŸ”¥', 2], ['ğŸ’§', 3], ['ğŸŒ', 5], ['ğŸ’¨', 7], ['âš¡', 11],
                    ['â¤ï¸', 13], ['ğŸŒŸ', 17], ['ğŸŒ±', 19], ['ğŸ', 23], ['ğŸ§ ', 29],
                    ['ğŸ”®', 31], ['ğŸ¦„', 37], ['ğŸŒˆ', 41], ['ğŸŒ™', 43], ['â˜„ï¸', 47],
                    ['ğŸŒŠ', 53], ['ğŸŒªï¸', 59], ['ğŸŒ‹', 61], ['â„ï¸', 67], ['â˜€ï¸', 71]
                ]);
                
                // Creative names for emojis
                this.emojiNames = new Map([
                    ['ğŸ”¥', 'Blazing Core'], ['ğŸ’§', 'Aqua Essence'], ['ğŸŒ', 'Terra Fragment'], 
                    ['ğŸ’¨', 'Zephyr Breath'], ['âš¡', 'Voltaic Spark'], ['â¤ï¸', 'Vital Pulse'],
                    ['ğŸŒŸ', 'Stellar Shard'], ['ğŸŒ±', 'Verdant Sprout'], ['ğŸ', 'Forbidden Knowledge'],
                    ['ğŸ§ ', 'Cosmic Mind'], ['ğŸ”®', 'Oracle Sphere'], ['ğŸ¦„', 'Mythic Steed'],
                    ['ğŸŒˆ', 'Prism Bridge'], ['ğŸŒ™', 'Lunar Whisper'], ['â˜„ï¸', 'Celestial Comet'],
                    ['ğŸŒŠ', 'Tidal Force'], ['ğŸŒªï¸', 'Vortex Core'], ['ğŸŒ‹', 'Magma Heart'],
                    ['â„ï¸', 'Crystal Frost'], ['â˜€ï¸', 'Solar Flare']
                ]);
                
                // Initialize UI
                this.initUI();
                this.renderElements();
                this.setupDragAndDrop();
                this.generateRandomRecipes(50);
                this.renderEncyclopedia();
            }
            
            // Your suggested equation: a âŠ• b = (a Ã— b) + (a + b)
            alchemyEquation(a, b) {
                return (a * b) + (a + b);
            }
            
            // Find closest emoji by value
            findClosestEmoji(value) {
                let closestEmoji = 'â“';
                let smallestDiff = Infinity;
                
                for (const [emoji, prime] of this.primeAssignments) {
                    const diff = Math.abs(prime - value);
                    if (diff < smallestDiff) {
                        smallestDiff = diff;
                        closestEmoji = emoji;
                    }
                }
                
                return closestEmoji;
            }
            
            // Generate random recipes
            generateRandomRecipes(count) {
                const emojis = Array.from(this.primeAssignments.keys());
                
                for (let i = 0; i < count; i++) {
                    const a = emojis[Math.floor(Math.random() * emojis.length)];
                    const b = emojis[Math.floor(Math.random() * emojis.length)];
                    
                    if (a !== b) {
                        const key = `${a}+${b}`;
                        const aVal = this.primeAssignments.get(a);
                        const bVal = this.primeAssignments.get(b);
                        const resultVal = this.alchemyEquation(aVal, bVal);
                        const result = this.findClosestEmoji(resultVal);
                        
                        if (!this.recipes.has(key)) {
                            this.recipes.set(key, {
                                result,
                                formula: `${a} âŠ• ${b} = (${aVal}Ã—${bVal}) + (${aVal}+${bVal}) = ${resultVal} â†’ ${result}`
                            });
                        }
                    }
                }
            }
            
            // Initialize UI
            initUI() {
                // Tab switching
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                        tab.classList.add('active');
                        document.getElementById(`${tab.dataset.tab}-tab`).classList.add('active');
                    });
                });
                
                // Energy display
                this.updateEnergyDisplay();
            }
            
            // Render elements
            renderElements() {
                const basicContainer = document.getElementById('basic-elements');
                const discoveredContainer = document.getElementById('discovered-elements');
                
                basicContainer.innerHTML = '';
                discoveredContainer.innerHTML = '';
                
                // Basic elements
                ['ğŸ”¥', 'ğŸ’§', 'ğŸŒ', 'ğŸ’¨', 'âš¡'].forEach(emoji => {
                    basicContainer.appendChild(this.createElementButton(emoji));
                });
                
                // Discovered elements (excluding basics)
                Array.from(this.discovered).forEach(emoji => {
                    if (!['ğŸ”¥', 'ğŸ’§', 'ğŸŒ', 'ğŸ’¨', 'âš¡'].includes(emoji)) {
                        discoveredContainer.appendChild(this.createElementButton(emoji));
                    }
                });
            }
            
            // Create element button
            createElementButton(emoji) {
                const element = document.createElement('div');
                element.className = 'element';
                element.draggable = true;
                element.dataset.emoji = emoji;
                element.dataset.id = `button-${emoji}`;
                element.innerHTML = `
                    <div class="element-emoji">${emoji}</div>
                    <div class="element-name">${this.emojiNames.get(emoji) || emoji}</div>
                `;
                
                element.addEventListener('dragstart', e => {
                    e.dataTransfer.setData('text/plain', emoji);
                    e.target.style.opacity = '0.6';
                });
                
                element.addEventListener('dragend', e => {
                    e.target.style.opacity = '1';
                });
                
                return element;
            }
            
            // Setup drag and drop
            setupDragAndDrop() {
                const workspace = document.getElementById('workspace');
                
                workspace.addEventListener('dragover', e => {
                    e.preventDefault();
                    e.dataTransfer.dropEffect = 'copy';
                });
                
                workspace.addEventListener('drop', e => {
                    e.preventDefault();
                    const emoji = e.dataTransfer.getData('text/plain');
                    
                    // Check if we have energy
                    if (this.energy < 10) {
                        alert("Not enough energy! Wait for it to recharge.");
                        return;
                    }
                    
                    // Create element at drop position
                    this.createElementInWorkspace(emoji, e.clientX, e.clientY);
                    
                    // Deduct energy
                    this.energy -= 10;
                    this.updateEnergyDisplay();
                });
            }
            
            // Create element in workspace
            createElementInWorkspace(emoji, x, y) {
                // Check if this emoji is already in workspace
                if (this.workspaceElements.has(emoji)) {
                    alert(`You already have ${emoji} in the workspace!`);
                    return;
                }
                
                const workspace = document.getElementById('workspace');
                const rect = workspace.getBoundingClientRect();
                const id = `element-${this.currentId++}`;
                
                const element = document.createElement('div');
                element.className = 'element';
                element.style.position = 'absolute';
                element.style.left = `${x - rect.left - 40}px`;
                element.style.top = `${y - rect.top - 40}px`;
                element.dataset.emoji = emoji;
                element.dataset.id = id;
                element.innerHTML = `
                    <div class="element-emoji">${emoji}</div>
                    <div class="element-name">${this.emojiNames.get(emoji) || emoji}</div>
                `;
                
                element.draggable = true;
                
                element.addEventListener('dragstart', e => {
                    e.dataTransfer.setData('text/plain', emoji);
                    e.dataTransfer.setData('element-id', id);
                    e.target.style.opacity = '0.6';
                });
                
                element.addEventListener('dragend', e => {
                    e.target.style.opacity = '1';
                });
                
                workspace.appendChild(element);
                this.workspaceElements.add(emoji);
                
                // Check for combinations
                this.checkCombinations(element);
            }
            
            // Check for element combinations
            checkCombinations(newElement) {
                const workspace = document.getElementById('workspace');
                const elements = workspace.querySelectorAll('.element');
                
                if (elements.length >= 2) {
                    elements.forEach(existingElement => {
                        if (existingElement !== newElement) {
                            const rect1 = newElement.getBoundingClientRect();
                            const rect2 = existingElement.getBoundingClientRect();
                            
                            // Simple collision detection
                            if (!(rect1.right < rect2.left || 
                                  rect1.left > rect2.right || 
                                  rect1.bottom < rect2.top || 
                                  rect1.top > rect2.bottom)) {
                                  
                                this.attemptCombination(
                                    newElement.dataset.emoji,
                                    existingElement.dataset.emoji,
                                    newElement,
                                    existingElement
                                );
                            }
                        }
                    });
                }
            }
            
            // Attempt to combine elements
            attemptCombination(emoji1, emoji2, element1, element2) {
                const a = this.primeAssignments.get(emoji1);
                const b = this.primeAssignments.get(emoji2);
                
                if (!a || !b) return;
                
                // Calculate result
                const resultVal = this.alchemyEquation(a, b);
                const resultEmoji = this.findClosestEmoji(resultVal);
                
                // Display equation
                document.getElementById('equation-display').textContent = 
                    `${emoji1} âŠ• ${emoji2} = (${a}Ã—${b}) + (${a}+${b}) = ${resultVal} â†’ ${resultEmoji}`;
                
                // Remove old elements
                this.workspaceElements.delete(emoji1);
                this.workspaceElements.delete(emoji2);
                element1.remove();
                element2.remove();
                
                // Add new element if not already discovered
                if (!this.discovered.has(resultEmoji)) {
                    this.discovered.add(resultEmoji);
                    this.renderElements();
                    this.renderEncyclopedia();
                    
                    // Create new recipe
                    const key = `${emoji1}+${emoji2}`;
                    if (!this.recipes.has(key)) {
                        this.recipes.set(key, {
                            result: resultEmoji,
                            formula: `${emoji1} âŠ• ${emoji2} = (${a}Ã—${b}) + (${a}+${b}) = ${resultVal} â†’ ${resultEmoji}`
                        });
                    }
                }
                
                // Create new element after delay
                setTimeout(() => {
                    const workspace = document.getElementById('workspace');
                    const centerX = workspace.clientWidth / 2;
                    const centerY = workspace.clientHeight / 2;
                    
                    this.createElementInWorkspace(resultEmoji, centerX + workspace.offsetLeft, centerY + workspace.offsetTop);
                }, 500);
            }
            
            // Render encyclopedia
            renderEncyclopedia() {
                const container = document.getElementById('encyclopedia');
                container.innerHTML = '';
                
                this.recipes.forEach((recipe, combo) => {
                    const recipeEl = document.createElement('div');
                    recipeEl.className = 'recipe';
                    
                    const formulaEl = document.createElement('div');
                    formulaEl.className = 'recipe-formula';
                    formulaEl.textContent = recipe.formula;
                    
                    const resultEl = document.createElement('div');
                    resultEl.className = 'recipe-result';
                    resultEl.innerHTML = `
                        <span class="element-emoji">${recipe.result}</span>
                        <span>${this.emojiNames.get(recipe.result) || recipe.result}</span>
                    `;
                    
                    recipeEl.appendChild(formulaEl);
                    recipeEl.appendChild(resultEl);
                    container.appendChild(recipeEl);
                });
            }
            
            // Update energy display
            updateEnergyDisplay() {
                document.getElementById('energy-fill').style.width = `${(this.energy / this.maxEnergy) * 100}%`;
                document.getElementById('energy-text').textContent = `${this.energy}/${this.maxEnergy}`;
                
                // Recharge energy over time
                if (this.energy < this.maxEnergy) {
                    setTimeout(() => {
                        this.energy = Math.min(this.energy + 1, this.maxEnergy);
                        this.updateEnergyDisplay();
                    }, 1000);
                }
            }
        }
        
        // Initialize game when loaded
        window.addEventListener('DOMContentLoaded', () => {
            const game = new EmojiAlchemy();
        });
    </script>
</body>
</html>